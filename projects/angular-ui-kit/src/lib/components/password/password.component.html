<div class="password-container">
  <label *ngIf="label" for="password" class="password-label">{{label}}</label>

  <div class="password-input-container">
    <input type="password" id="password"
      [ngClass]="{'password-weak': passwordStrength === 'weak', 'password-medium': passwordStrength === 'medium', 'password-good': passwordStrength === 'good', 'password-great': passwordStrength === 'great'}"
      (input)="onPasswordChange($event)" [placeholder]="placeholder" [(ngModel)]="password" />

    <button type="button" (click)="togglePasswordVisibility()" class="password-toggle">

      <svg *ngIf="!passwordVisible" width="20" height="20" viewBox="0 0 20 20" fill="none"
        xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M2.92702 10C3.95678 12.9138 6.73604 15 10.0005 15C13.2649 15 16.0442 12.9139 17.074 10.0001C16.0442 7.08625 13.2649 5.00004 10.0005 5.00004C6.73604 5.00004 3.95679 7.08623 2.92702 10ZM1.25363 9.7503C2.42147 6.03206 5.89473 3.33337 10.0005 3.33337C14.1063 3.33337 17.5795 6.03209 18.7474 9.75037C18.7984 9.91292 18.7984 10.0872 18.7474 10.2498C17.5795 13.968 14.1063 16.6667 10.0005 16.6667C5.89473 16.6667 2.42145 13.968 1.25362 10.2497C1.20257 10.0872 1.20257 9.91286 1.25363 9.7503ZM10.0001 8.33337C9.07965 8.33337 8.33346 9.07957 8.33346 10C8.33346 10.9205 9.07965 11.6667 10.0001 11.6667C10.9206 11.6667 11.6668 10.9205 11.6668 10C11.6668 9.07957 10.9206 8.33337 10.0001 8.33337ZM6.66679 10C6.66679 8.15909 8.15917 6.66671 10.0001 6.66671C11.8411 6.66671 13.3335 8.15909 13.3335 10C13.3335 11.841 11.8411 13.3334 10.0001 13.3334C8.15917 13.3334 6.66679 11.841 6.66679 10Z"
          fill="#626262" />
      </svg>

      <svg *ngIf="passwordVisible" width="20" height="20" viewBox="0 0 20 20" fill="none"
        xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M1.91087 1.9107C2.2363 1.58527 2.76394 1.58527 3.08938 1.9107L5.62295 4.44428C6.92426 3.73579 8.41633 3.33329 10.0005 3.33329C14.1063 3.33329 17.5795 6.03201 18.7474 9.75028C18.7984 9.91284 18.7984 10.0871 18.7474 10.2497C18.2034 11.9815 17.1605 13.4904 15.7878 14.6091L18.0894 16.9107C18.4148 17.2361 18.4148 17.7638 18.0894 18.0892C17.7639 18.4147 17.2363 18.4147 16.9109 18.0892L1.91087 3.08922C1.58543 2.76378 1.58543 2.23614 1.91087 1.9107ZM6.86382 5.68515L8.30694 7.12826C8.80314 6.8352 9.3823 6.66663 10.0001 6.66663C11.8411 6.66663 13.3335 8.15901 13.3335 9.99996C13.3335 10.6178 13.1649 11.1969 12.8718 11.6931L14.6018 13.4231C15.7243 12.5498 16.5915 11.3649 17.074 9.99998C16.0442 7.08617 13.2649 4.99996 10.0005 4.99996C8.87969 4.99996 7.81764 5.24532 6.86382 5.68515ZM11.6105 10.4318C11.6472 10.2941 11.6668 10.1494 11.6668 9.99996C11.6668 9.07948 10.9206 8.33329 10.0001 8.33329C9.85067 8.33329 9.70595 8.35285 9.56828 8.38961L11.6105 10.4318ZM3.85419 6.81144C4.22118 7.08917 4.29355 7.61182 4.01582 7.97882C3.55532 8.58732 3.18581 9.26774 2.92702 9.99994C3.95678 12.9138 6.73605 15 10.0005 15C10.482 15 10.9522 14.9547 11.4073 14.8684C11.8594 14.7827 12.2955 15.0797 12.3813 15.5319C12.467 15.9841 12.17 16.4201 11.7178 16.5059C11.1609 16.6115 10.5867 16.6666 10.0005 16.6666C5.89473 16.6666 2.42145 13.9679 1.25362 10.2496C1.20257 10.0871 1.20257 9.91278 1.25363 9.75022C1.57188 8.73693 2.06104 7.79997 2.68682 6.97307C2.96454 6.60608 3.4872 6.53371 3.85419 6.81144Z"
          fill="#626262" />
      </svg>

    </button>
  </div>

  <div *ngIf="password" class="password-strength">
    <div class="password-strength-bar-container">
      <div class="password-strength-bar" [ngClass]="passwordStrength"></div>

      <div class="password-strength-bar" [ngClass]="passwordStrength"></div>

      <div class="password-strength-bar" [ngClass]="passwordStrength"></div>

      <div class="password-strength-bar" [ngClass]="passwordStrength"></div>
    </div>
    <div class="password-strength-label">
      <div style="display: flex;gap: 3px;align-items: center;">
        <span
          [ngClass]="{'label-weak': passwordStrength === 'weak', 'label-medium': passwordStrength === 'medium', 'label-good': passwordStrength === 'good', 'label-great': passwordStrength === 'great'}"
          class="capitalized">{{ passwordStrength }}</span>

        <button (click)="toggleTooltip()">
          <svg 
          [ngClass]="passwordStrength === 'good' || passwordStrength === 'great' ?'hide':'show' "
          class="information-circle" width="20" height="20" viewBox="0 0 13 13" fill="none"
          xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M6.99996 2.33329C4.42263 2.33329 2.33329 4.42263 2.33329 6.99996C2.33329 9.57729 4.42263 11.6666 6.99996 11.6666C9.57729 11.6666 11.6666 9.57729 11.6666 6.99996C11.6666 4.42263 9.57729 2.33329 6.99996 2.33329ZM1.16663 6.99996C1.16663 3.7783 3.7783 1.16663 6.99996 1.16663C10.2216 1.16663 12.8333 3.7783 12.8333 6.99996C12.8333 10.2216 10.2216 12.8333 6.99996 12.8333C3.7783 12.8333 1.16663 10.2216 1.16663 6.99996ZM6.41663 4.66663C6.41663 4.34446 6.67779 4.08329 6.99996 4.08329H7.00579C7.32796 4.08329 7.58913 4.34446 7.58913 4.66663C7.58913 4.98879 7.32796 5.24996 7.00579 5.24996H6.99996C6.67779 5.24996 6.41663 4.98879 6.41663 4.66663ZM5.83329 6.99996C5.83329 6.67779 6.09446 6.41663 6.41663 6.41663H6.99996C7.32213 6.41663 7.58329 6.67779 7.58329 6.99996V8.74996C7.90546 8.74996 8.16663 9.01113 8.16663 9.33329C8.16663 9.65546 7.90546 9.91663 7.58329 9.91663H6.99996C6.67779 9.91663 6.41663 9.65546 6.41663 9.33329V7.58329C6.09446 7.58329 5.83329 7.32213 5.83329 6.99996Z"
            fill="#727272" />
        </svg>
        </button>

      </div>
      <div *ngIf="isTooltipVisible && (passwordStrength === 'weak' || passwordStrength === 'medium')" class="tooltip">
        <div class="tooltip-arrow"></div>
        Your password is easy to guess. Try to add more different characters.
      </div>
    </div>
  </div>
</div>